/*! stanhua 2016-10-10 21:10:25 */
!function(a){stanLayer=function(b){function c(){stanUI.layerIndex++,this.layerZindex+=stanUI.layerIndex;var b=this.layerZindex+1,c=this.options,e=c.type>this.layerType.length?0:c.type,f=c.mask,g=c.width,h=c.height,i=c.animation,j=c.btns,k=j.length,l=this.layerType[e],m="",n="",o="",p="",q="",r="",s="";if(q=g>0?"width:"+g+"px;":"",q=q+h>0?"height:"+h+"px;":"",1==e){var t=c.position;t=""==t?"middle":t,m=" layer-open-"+t,"top"==t?""==i&&(i="fadeT"):"bottom"==t?""==i&&(i="fadeB"):"left"==t?""==i&&(i="fadeL"):"right"==t&&""==i&&(i="fadeR")}4==e&&(f=!1),e>2&&(o=" layer-tips",""==i&&(i="bounce")),i=0==e?""==i?"fadeR":i:""==i?"bounce":i,f&&(p+='<div class="layer-mask layer-'+l+'-mask" style="z-index:'+this.layerZindex+'"></div>');var u=c.title,v=c.titleTips;""!=u&&(r=""!=v?'<div class="layer-title layer-title-tips">':'<div class="layer-title">',""!=c.back&&(r+='<a class="t-item t-left">'+c.back+"</a>"),r+=""!=v?'<div class="title"><div class="main">'+u+'</div><div class="tips">'+v+"</div></div>":'<div class="title">'+u+"</div>",""!=c.ok&&(r+='<a class="t-item t-right">'+c.ok+"</a>"),r+="</div>"),""!=c.url&&(n=" layer-iframe",c.content="<iframe class='stanIframe' name='stanIframe' src='"+c.url+"'></iframe>"),k>0&&3>k&&(s='<div class="layer-btn">',s+=1==k?'<a class="yes w100">'+j[0]+"</a>":'<a class="cancel w50">'+j[0]+'</a><a class="yes w50">'+j[1]+"</a>",s+="</div>"),p+='<div class="layer layer'+stanUI.layerIndex+o+" layer-"+l+m+n+'" data-index="',p+=stanUI.layerIndex+'" style="z-index:'+b+";"+q+'">',p+='<div class="layer-box">'+r,p+='<div class="layer-content">'+c.content+"</div>",p+=s+"</div></div>",a("body").append(p),a("html").hasClass("layer-on")||a("html").addClass("layer-on"),c.hash&&("pushState"in history?history.pushState("layer",u,location.href):location.hash=l);var w=a(".layer"+stanUI.layerIndex);d(w),""!=i&&w.addAnimation(i),0==e&&a(".page").removeAnimation("fadeP",function(a){a.hide(650)}),"function"==typeof success&&success(w),e>2&&stanLayer.refresh(w)}function d(a){var b=this.options,c=a.find(".layer-btn");if(b.clickClose){var d=a.prev(".layer-mask");d.length>0?d.off("click").on("click",function(a){stanLayer.close(stanUI.layerIndex)}):a.off("click").on("click",function(a){stanLayer.close(stanUI.layerIndex)})}""!=b.back&&a.find(".t-left").off("click").on("click",function(){b.backCallback?b.backCallback(a):stanLayer.close(stanUI.layerIndex)}),""!=b.ok&&a.find(".t-right").off("click").on("click",function(){b.okCallback?b.okCallback(a):stanLayer.close(stanUI.layerIndex)}),c.length>0&&(c.children(".yes").off("click").on("click",function(){b.yesCallback?b.yesCallback(a):stanLayer.close(stanUI.layerIndex)}),2==b.btns.length&&c.children(".cancel").off("click").on("click",function(){b.cancelCallback?b.cancelCallback(a):stanLayer.close(stanUI.layerIndex)})),b.time>0&&("function"==typeof timeCallback?b.timeCallback(a):a.delay(1e3*b.time).show(1e3*b.time,function(){stanLayer.close(stanUI.layerIndex)}))}b=b||{};var e={type:0,hash:!1,mask:!0,clickClose:!1,skin:"",width:0,height:0,animation:"",time:0,title:"",titleTips:"",back:"",ok:"",content:"",url:"",btns:[],success:null,timeCallback:null,backCallback:null,okCallback:null,yesCallback:null,cancelCallback:null};this.layerZindex=100,this.layerType=["page","open","iframe","loading","msg","alert","confirm"],this.options=a.extend({},e,b),c()},stanLayer.refresh=function(a){var b=-Math.floor(a.height()/2)+"px",c=-Math.floor(a.width()/2)+"px";a.css({"margin-top":b,"margin-left":c})},stanLayer.close=function(b){var c,d=a("html"),e=d.find(".page"),f=d.find(".layer"),g=f.length;if(g>0){c=void 0==b?f.eq(g-1):d.find(".layer"+b),c.prev(".layer-mask").length>0&&c.prev(".layer-mask").remove();var h=c.attr("data-animation");if(void 0==h?c.remove():c.removeAnimation(h,function(a){a.delay(650).show(10,function(){a.remove()})}),c.hasClass("layer-page")){var i=e.attr("data-animation");void 0!=i&&e.addAnimation(i,function(a){a.show()})}1==g&&("replaceState"in history&&null!=history.state&&(history.back(),history.replaceState(null,null,href)),d.hasClass("layer-on")&&d.removeClass("layer-on"))}},stanLayer.closeAll=function(){var b=a("html"),c=b.find(".layer"),d=c.length;if(d>0){if(d>1)for(var e=0;d-1>e;e++)c.eq(e).remove();c.eq(d-1).delay(2e3).show(1e3,function(){stanLayer.close(c.eq(d-1).attr("data-index"))})}},stanLayer.page=function(b){stanLayer(a.extend({type:0},void 0==b?{}:b))},stanLayer.open=function(b,c){stanLayer(a.extend({type:1,position:b},void 0==c?{}:c))},stanLayer.loading=function(b,c){var d=a(".layer-loading");b="<p>"+b+"</p>"||"<p>正在努力加载</p>",b=stanUI.loaderHtml+b,d.length>0?d.find(".layer-content").empty().html(b):stanLayer(a.extend({type:3,time:2,content:b},void 0==c?{}:c))},stanLayer.closeLoading=function(){var b=a(".layer-loading");b.length>0&&stanLayer.close(b.attr("data-value"))},stanLayer.msg=function(b,c,d){var e=a(".layer-msg");e.length>0?e.find(".layer-content").empty().html(b):stanLayer(a.extend({type:4,content:b,time:c},void 0==d?{}:d))},stanLayer.closeMsg=function(){var b=a(".layer-msg");b.length>0&&stanLayer.close(b.attr("data-value"))},stanLayer.alert=function(b,c,d,e){c=c||"知道了",stanLayer(a.extend({type:5,content:b,btns:[c],yesCallback:d},void 0==e?{}:e))},stanLayer.confirm=function(b,c,d,e,f){return stanLayer(a.extend({type:6,content:b,btns:c,yesCallback:e,cancelCallback:d},void 0==f?{}:f))},stanLayer.password=function(b){var c={title:"请输入支付密码",titleTips:"",back:"取消",showPassword:!0,success:null,cancelCallback:null,submitCallback:null},d=a.extend(c,b),e="<div class='layer-view'><div class='pay-box'></div>";if(d.showPassword){for(var f="<div class='password-box'><div class='password-view'>",g=1;7>g;g++){var h="";1==g?h=" first":6==g&&(h=" last"),f+="<div class='pwd"+h+"'><span><span></div>"}f+="</div></div>",f+="<div class='board-box'></div>",e+=f}e+="</div>",stanLayer.open({hash:!0,position:"bottom",skin:"password",title:d.title,back:d.back,success:function(b){function c(){for(var b="",c=0;6>c;c++)b+=a.trim(f.eq(c).children("span").text());return b}b.empty().html(e),d.success&&d.success(b);var f=b.find(".password-box").find(".pwd"),g=b.find(".board-box"),h=0;numberKeyBoard(g,!1,function(b){var e="";if(b.hasClass("backspace")){if(0>=h)return;return h--,f.eq(h).removeClass("used").children("span").text(""),void(e=c())}h>5||(f.eq(h).addClass("used").children("span").text(a.trim(b.text())),h++,e=c(),6==h&&"function"==typeof d.submitCallback&&d.submitCallback(e))})},backCallback:function(a){"function"==typeof d.cancelCallback?d.cancelCallback(a):stanLayer.close()}})},numberKeyBoard=function(a,b,c){for(var d="<div class='boardview'>",e=1;10>e;e++)e%3==1&&(d+="<div class='gradview'>"),d+="<a class='item'>"+e+"</a>",e%3==0&&(d+="</div>");d+="<div class='v-line v-one'></div>",d+="<div class='v-line v-two'></div>",d+="<div class='gradview'>",d+=b?"<a class='item'>.</a>":"<a class='item empty'></a>",d+="<a class='item'>0</a>",d+="<a class='item backspace'><b class='m-icon m-backspace'></b></a>",d+="</div></div>",a.empty().html(d),bamyClick(a.children(".boardview").find(".item"),function(a){a.hasClass("empty")||"function"==typeof c&&c(a)})}}(jQuery);